import { Router } from 'express';
import { authenticate } from '../middleware/auth.js';
import { canCreateTaskIssue, isNotClient } from '../middleware/rbac.js';
import { createTaskIssue, getTaskIssues, updateTaskIssue, getTaskIssue, deleteTaskIssue } from '../controllers/taskIssueController.js';
const router = Router();
router.post('/tasks/:taskId/issues', authenticate, canCreateTaskIssue, createTaskIssue);
router.get('/tasks/:taskId/issues', authenticate, canCreateTaskIssue, getTaskIssues);
router.get('/issues/:issueId', authenticate, isNotClient, getTaskIssue);
router.put('/issues/:issueId', authenticate, isNotClient, updateTaskIssue);
router.delete('/issues/:issueId', authenticate, isNotClient, deleteTaskIssue);
export default router;
